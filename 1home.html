<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recipe Taste</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="theme.css">
  <!-- Bootstrap JS Bundle (includes Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Recipe Taste</a>
      <div>
        <a href="recipeadd.html" id="addRecipeLink" class="btn btn-success d-none">Add Recipe</a>
        <a href="recipe.html" class="btn btn-outline-light">Login</a>
        <button class="btn btn-outline-danger" onclick="logout()">Logout</button>

      </div>
    </div>
  </nav>

  <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="image/img1.jpg" class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="image/img2.jpg" class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="image/img3.jpeg" class="d-block w-100" alt="...">
      </div>
    </div>
  </div>

  <div class="line text-white">Discover authentic recipes from around the worldâ€”from Italian pasta to Japanese sushi. Explore the flavors that make each culture unique.</div>

  <div class="d-flex justify-content-center align-items-center gap-3 flex-wrap mt-3">
    <input id="searchInput" class="form-control" type="search" placeholder="Search Recipes" style="width: 300px;" />
    <button class="btn btn-success" onclick="filterRecipes()">Search</button>
  </div>

  <div class="d-flex justify-content-center flex-wrap mt-4 gap-3">
    <button class="btn btn-light" onclick="filterByCategory('All')">All</button>
    <button class="btn btn-light" onclick="filterByCategory('Indian')">Indian</button>
    <button class="btn btn-light" onclick="filterByCategory('South Indian')">South Indian</button>
    <button class="btn btn-light" onclick="filterByCategory('Japanese')">Japanese</button>
    <button class="btn btn-light" onclick="filterByCategory('Punjabi')">Punjabi</button>
    <button class="btn btn-light" onclick="filterByCategory('French')">French</button>
    <button class="btn btn-light" onclick="filterByCategory('Mexican')">Mexican</button>
    <button class="btn btn-light" onclick="filterByCategory('Chinese')">Chinese</button>
  </div>

  <div id="recipeContainer" class="container mt-5 d-flex flex-wrap justify-content-center gap-4"></div>
  <footer >
    &copy; 2025 Recipe Taste. Crafted with flavor and love.
  </footer>


  <script>
    let allRecipes = [];

// Jab page load ho
window.onload = function () {
  const user = localStorage.getItem("loggedInUser");

  // Agar user login hai to "Add Recipe" link dikhaye
  if (user) {
    document.getElementById("addRecipeLink").classList.remove("d-none");
  }

  // Local storage se recipes lo
  allRecipes = JSON.parse(localStorage.getItem("recipes")) || [];

  // Recipes ko screen par dikhaye
  displayRecipes(allRecipes);
};

// Recipe cards banakar dikhana
function displayRecipes(recipes) {
  const container = document.getElementById("recipeContainer");
  container.innerHTML = "";

  if (recipes.length === 0) {
    container.innerHTML = `<p class="text-white">No recipes found.</p>`;
    return;
  }

  recipes.forEach((recipe, index) => {
    const card = document.createElement("div");
    card.className = "card";
    card.style.width = "18rem";

    card.innerHTML = `
      <img src="${recipe.cardImage || 'default.jpg'}" class="card-img-top" alt="Image" />
      <div class="card-body">
        <h5 class="card-title">${recipe.cardTitle}</h5>
        <p class="card-text"><strong>Category:</strong> ${recipe.category}</p>
        <p class="card-text">${recipe.cardText}</p>
        <button class="btn btn-primary mb-2" onclick="viewRecipe(${index})">View</button>
        <button class="btn btn-warning mb-2" onclick="editRecipe(${index})">Edit</button>
        <button class="btn btn-danger" onclick="deleteRecipe(${index})">Delete</button>
      </div>
    `;

    container.appendChild(card);
  });
}

// Category ke hisaab se filter karna
function filterByCategory(category) {
  if (category === "All") {
    displayRecipes(allRecipes);
  } else {
    const filtered = allRecipes.filter(recipe =>
      recipe.category.toLowerCase() === category.toLowerCase()
    );
    displayRecipes(filtered);
  }
}

// Search box ke keyword se filter karna
function filterRecipes() {
  const keyword = document.getElementById("searchInput").value.toLowerCase();

  const filtered = allRecipes.filter(recipe =>
    recipe.cardTitle.toLowerCase().includes(keyword) ||
    recipe.cardText.toLowerCase().includes(keyword) ||
    recipe.category.toLowerCase().includes(keyword)
  );

  displayRecipes(filtered);
}

// Recipe ko view karna
function viewRecipe(index) {
  const selected = allRecipes[index];
  localStorage.setItem("selectedRecipe", JSON.stringify(selected));
  window.location.href = "view.html";
}

// Recipe ko edit karna
function editRecipe(index) {
  const selected = allRecipes[index];
  selected.index = index;
  localStorage.setItem("editRecipe", JSON.stringify(selected));
  window.location.href = "recipeadd.html";
}

// Recipe ko delete karna
function deleteRecipe(index) {
  if (!confirm("Are you sure you want to delete this recipe?")) return;

  allRecipes.splice(index, 1);
  localStorage.setItem("recipes", JSON.stringify(allRecipes));
  displayRecipes(allRecipes);
}

 function logout() {
    // Remove user session from localStorage
    localStorage.removeItem("loggedInUser");

    // Optionally clear other session data
    // localStorage.clear();

    // Redirect to login page
    window.location.href = "recipe.html";
  }


  </script>
</body>
</html>
